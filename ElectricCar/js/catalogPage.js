import CatalogPageData from './catalogPageData.js';

export default class CatalogPage {
    constructor() {
        
        this.prevBtn = document.querySelector('.arrow-1__action');
        this.nextBtn = document.querySelector('.arrow-2__action');
        this.containerCatalogCards = document.querySelector('.catalog__cards-wrapper--items');
        console.log(this.nextBtn)
        
        
        this.launchCatalogSlider();
    }
    createAndRenderCardsOfCatalog() {
        
        this.containerCatalogCards.innerHTML =  CatalogPageData.map( ({ img, name, features, button, id, action },slideIndex) => {
            
        
            let position = "slider__item-next";
                if( slideIndex === 0) {
                    position = "slider__item-active";
                }
                if (slideIndex === CatalogPageData.length -1) {
                    position = "slider__item-last";
                }
            return `
                
                <div class="catalog__cards-items ${position} "> 
                <div id="${id}" class="catalog-item item__cards-cars">
                <div class="catalog__img-wrapper">
                    <img class="item-img" src="${img}" alt="Car">
                </div>
                <div class="item__name-wrapper">${name}</div>
                <div class="catalog-item__description">
                    <div class="description of-transmission">
                        <div class="feature">
                            <svg class="feature-svg" viewBox="0 0 28 28">
                                <path d="M21.5834 8.16665H22.75C23.715 8.16665 24.5 7.38166 24.5 6.41665V1.75C24.5 0.784984 23.715 0 22.75 0H21.5834C20.6183 0 19.8334 0.784984 19.8334 1.75V2.96718L15.5854 3.35327C15.3077 2.75308 14.7037 2.33335 14 2.33335C13.2963 2.33335 12.6924 2.75302 12.4146 3.35327L8.16665 2.96718V1.75C8.16665 0.784984 7.38166 0 6.41665 0H5.25C4.28498 0 3.5 0.784984 3.5 1.75V6.41665C3.5 7.38166 4.28498 8.16665 5.25 8.16665H6.41665C7.38166 8.16665 8.16665 7.38166 8.16665 6.41665V5.19952L12.4146 4.81343C12.5162 5.03305 12.6626 5.22545 12.8411 5.38459L13.2662 11.697C13.0187 11.7645 12.8332 11.9809 12.8332 12.25V15.75C12.8332 16.0091 13.0046 16.2212 13.2381 16.2974L12.8419 21.4481C12.4818 21.7689 12.25 22.2307 12.25 22.75V23.1718L8.16665 22.8005V21.5833C8.16665 20.6183 7.38166 19.8333 6.41665 19.8333H5.25C4.28498 19.8333 3.5 20.6183 3.5 21.5833V26.25C3.5 27.215 4.28498 28 5.25 28H6.41665C7.38166 28 8.16665 27.215 8.16665 26.25V25.0329L12.25 24.6615V25.0833C12.25 26.0483 13.035 26.8333 14 26.8333C14.965 26.8333 15.75 26.0483 15.75 25.0833V24.6615L19.8334 25.0328V26.25C19.8334 27.215 20.6183 28 21.5834 28H22.75C23.715 28 24.5 27.215 24.5 26.25V21.5834C24.5 20.6183 23.715 19.8334 22.75 19.8334H21.5834C20.6183 19.8334 19.8334 20.6183 19.8334 21.5834V22.8005L15.75 23.1718V22.75C15.75 22.2306 15.5181 21.7686 15.1577 21.4478L14.7577 16.2982C14.9932 16.2232 15.1666 16.0106 15.1666 15.7501V12.2501C15.1666 11.9826 14.9834 11.7669 14.7382 11.6979L15.159 5.38453C15.3374 5.22539 15.4837 5.03305 15.5853 4.81354L19.8333 5.19963V6.41676C19.8334 7.38166 20.6183 8.16665 21.5834 8.16665Z"/>
                            </svg>
                            <div class="feature-name">${Object.keys(features)[0]}</div>
                        </div>
                        <div class="feature__name">${features['Привод']}</div>
                    </div>
                    <div class="description of-reserve">
                        <div class="feature">
                            <svg class="feature-svg" viewBox="0 0 28 28">
                                <path d="M23.1812 12.25C20.5278 12.2527 18.3709 14.4266 18.3736 17.0964C18.3747 18.5549 19.1015 20.2174 20.5338 22.0385C21.5559 23.3384 22.5687 24.2419 22.6114 24.2796C22.9437 24.5746 23.4439 24.5726 23.774 24.2785C23.8167 24.2408 24.8278 23.3352 25.8478 22.0336C26.942 20.6367 27.9986 18.8548 27.9986 17.0871C27.9964 14.4224 25.8557 12.25 23.1812 12.25ZM21.8736 17.0636C21.8725 16.3387 22.4591 15.7511 23.1845 15.75C24.3522 15.75 24.9366 17.1676 24.1147 17.9895C23.2968 18.8092 21.8736 18.2383 21.8736 17.0636Z" />
                                <path d="M4.23371 12.0291C4.56528 12.3234 5.0643 12.3239 5.39636 12.0291C5.43902 11.9913 6.45128 11.0868 7.4723 9.78633C8.90238 7.96359 9.62753 6.30055 9.62753 4.84148C9.62753 2.17219 7.46847 0 4.81503 0C2.1616 0 0.00253296 2.17219 0.00253296 4.84148C0.00253296 6.30055 0.727689 7.96359 2.15777 9.78633C3.17878 11.0868 4.19105 11.9913 4.23371 12.0291ZM4.81503 3.5C5.53855 3.5 6.12753 4.08898 6.12753 4.8125C6.12753 5.53602 5.53855 6.125 4.81503 6.125C4.09152 6.125 3.50253 5.53602 3.50253 4.8125C3.50253 4.08898 4.09152 3.5 4.81503 3.5Z" />
                                <path d="M24.508 26.6863C24.508 27.8851 23.0213 28.4585 22.2182 27.5624H3.93956C1.76847 27.5624 0.0020752 25.796 0.0020752 23.625C0.0020752 21.4539 1.76847 19.6875 3.93956 19.6875H12.7169C13.908 19.6875 14.877 18.7184 14.877 17.5273C14.877 16.3362 13.908 15.3672 12.7169 15.3672H5.79291C5.52877 15.6587 5.17719 15.8047 4.81456 15.8047C3.65103 15.8047 3.06336 14.3873 3.88542 13.5652C4.42584 13.0236 5.30379 13.0633 5.79236 13.6172H12.7169C14.8732 13.6172 16.627 15.371 16.627 17.5273C16.627 19.6836 14.8732 21.4375 12.7169 21.4375H3.93956C2.73316 21.4375 1.75207 22.4186 1.75207 23.625C1.75207 24.8314 2.73316 25.8124 3.93956 25.8124C23.6279 25.8124 22.1893 25.8381 22.2669 25.7605C23.0868 24.9387 24.5071 25.5159 24.508 26.6863Z" />
                            </svg>
                            <div class="feature-name">${Object.keys(features)[1]}</div>
                        </div>
                        <div class="feature__name">${features['Запас хода']}</div>
                    </div>
                    <div class="description of-mileage">
                        <div class="feature">
                            <svg class="feature-svg" viewBox="0 0 28 28">
                                <path d="M14.066 19.4916C14.6482 19.4916 15.1202 19.0196 15.1202 18.4374C15.1202 17.8552 14.6482 17.3832 14.066 17.3832C13.4838 17.3832 13.0118 17.8552 13.0118 18.4374C13.0118 19.0196 13.4838 19.4916 14.066 19.4916Z"/>
                                <path d="M23.183 22.3935L24.0044 20.9707L26.505 22.4144C27.3618 20.7291 27.8696 18.8795 27.9908 16.9647H25.0778V15.3217H28C27.8993 13.3905 27.4085 11.5319 26.5659 9.8368L24.0044 11.3157L23.183 9.89286L25.7485 8.41165C25.2219 7.6073 24.6093 6.85092 23.9136 6.15529C23.2425 5.48417 22.5151 4.88983 21.7424 4.37593L20.2503 6.96029L18.8275 6.13883L20.3231 3.54834C18.6254 2.68876 16.7606 2.18482 14.8215 2.07347V5.06543H13.1785V2.07336C11.2394 2.18465 9.37459 2.68865 7.67687 3.54818L9.17246 6.13867L7.74966 6.96013L6.25762 4.37582C5.48494 4.88972 4.75754 5.48406 4.08641 6.15518C3.39079 6.85081 2.77813 7.60719 2.25154 8.41154L4.81704 9.89275L3.99558 11.3156L1.43413 9.83669C0.5915 11.5319 0.100734 13.3905 0 15.3216H2.92217V16.9646H0.0091875C0.130375 18.8795 0.638203 20.729 1.49494 22.4144L3.99552 20.9706L4.81698 22.3934L2.32438 23.8325C2.7551 24.4786 3.24188 25.0926 3.7823 25.6677L4.0256 25.9266H23.9742L24.2175 25.6677C24.7579 25.0926 25.2447 24.4786 25.6754 23.8325L23.183 22.3935ZM14.066 21.1346C12.5788 21.1346 11.3688 19.9247 11.3688 18.4375C11.3688 17.2366 12.1579 16.2169 13.2445 15.8686V10.7201H14.8875V15.8686C15.9742 16.217 16.7633 17.2366 16.7633 18.4375C16.7632 19.9247 15.5532 21.1346 14.066 21.1346ZM21.076 16.0688C21.076 12.2035 17.9313 9.05887 14.066 9.05887C10.2007 9.05887 7.056 12.2035 7.056 16.0688H5.41308C5.41308 11.2976 9.29474 7.4159 14.066 7.4159C18.8373 7.4159 22.7189 11.2976 22.7189 16.0688H21.076Z"/>
                            </svg>
                            <div class="feature-name">${Object.keys(features)[2]}</div>
                        </div>
                    <div class="feature__name">${features['Пробег']}</div>
                    </div>
                    <div class="description of-year">
                        <div class="feature">
                            <svg  class="feature-svg" viewBox="0 0 28 28">
                                <path d="M25.8443 3.84886H23.9657V5.51433C23.9657 6.70553 23.0005 7.67007 21.8099 7.67007C20.6187 7.67007 19.6542 6.70553 19.6542 5.51433V3.84886H16.1557V5.51433C16.1557 6.70553 15.1918 7.67007 14 7.67007C12.8082 7.67007 11.8443 6.70553 11.8443 5.51433V3.84886H8.3458V5.51433C8.3458 6.70553 7.38126 7.67007 6.19006 7.67007C4.99947 7.67007 4.03432 6.70553 4.03432 5.51433V3.84886H2.15574C1.58416 3.84886 1.03599 4.07552 0.631324 4.47957C0.227277 4.88423 0 5.43241 0 6.0046V24.4214C0 25.6126 0.965156 26.5772 2.15574 26.5772H25.8443C27.0361 26.5772 28 25.6126 28 24.4214V6.0046C28 4.81402 27.0361 3.84886 25.8443 3.84886ZM23.6885 10.6616V13.7874H19.6209V10.6616H23.6885ZM9.34298 14.7514H13.5177V17.7152H9.34298V14.7514ZM8.37967 17.714H4.3121V14.7501H8.38029L8.37967 17.714ZM13.5183 18.6779V22.2657H9.3436V18.6779H13.5183ZM14.4829 18.6779H18.6564V22.2657H14.4829V18.6779ZM14.4829 17.714V14.7501H18.6564V17.714H14.4829ZM19.6203 14.7514H23.6879V17.7152H19.6203V14.7514ZM18.6576 10.6616V13.7874H14.4829V10.6616H18.6576ZM13.5183 10.6616V13.7874H9.3436V10.661L13.5183 10.6616ZM8.37967 10.661V13.7874H4.3121V10.661H8.37967ZM4.3121 18.6779H8.38029V22.2657H4.3121V18.6779ZM19.6203 22.2657V18.6779H23.6879V22.2657H19.6203ZM4.95821 5.51433V2.65458C4.95821 1.9746 5.51008 1.42273 6.19006 1.42273C6.87066 1.42273 7.42191 1.9746 7.42191 2.65458V5.51433C7.42191 6.19431 6.87066 6.74618 6.19006 6.74618C5.51069 6.74618 4.95821 6.19431 4.95821 5.51433ZM12.7681 5.51433V2.65458C12.7681 1.9746 13.32 1.42273 14 1.42273C14.68 1.42273 15.2319 1.9746 15.2319 2.65458V5.51433C15.2319 6.19431 14.68 6.74618 14 6.74618C13.32 6.74618 12.7681 6.19431 12.7681 5.51433ZM20.5787 5.51433V2.65458C20.5787 1.9746 21.1306 1.42273 21.8106 1.42273C22.4905 1.42273 23.0424 1.9746 23.0424 2.65458V5.51433C23.0424 6.19431 22.4905 6.74618 21.8106 6.74618C21.1293 6.74618 20.5787 6.19431 20.5787 5.51433Z"/>
                            </svg>
                            <div class="feature-name">${Object.keys(features)[3]}</div>
                        </div>
                    <div class="feature__name">${features['Год выпуска']}</div>
                </div>
                    <div class="description of-price">
                        <div class="feature">
                            <svg class="feature-svg" viewBox="0 0 28 28">
                                <path d="M27.2719 4.19916C28.2317 3.23941 28.2317 1.67883 27.2719 0.719082C26.3122 -0.24067 24.7516 -0.24067 23.7918 0.719082L18.3407 6.178H11.3799L0.00830078 17.5409L8.12925 25.6619L19.516 14.2911V7.3301L20.9497 5.88065C22.554 6.94136 24.7211 6.74995 26.1118 5.35924L27.2719 4.19916ZM13.4595 15.6915L12.2995 14.5314C12.6192 14.211 12.6192 13.6911 12.2995 13.3706C11.9807 13.0518 11.4583 13.0509 11.1395 13.3714C10.8198 13.6911 10.8198 14.211 11.1395 14.5314C12.0992 15.4912 12.0992 17.0518 11.1395 18.0115C10.4722 18.6788 9.41999 18.977 8.35589 18.4743L7.07861 19.7515L5.91858 18.5915L7.19646 17.3136C6.76655 16.4006 6.90573 15.2854 7.65782 14.5314L8.81944 15.6915C8.49978 16.0111 8.49978 16.5318 8.81944 16.8515C9.1391 17.1727 9.6598 17.1712 9.97946 16.8515C10.2991 16.5318 10.2991 16.0111 9.97946 15.6915C9.01971 14.7317 9.01971 13.1703 9.97946 12.2106C10.7341 11.4573 11.8496 11.3182 12.7621 11.748L14.0395 10.4706L15.1996 11.6306L13.9224 12.9078C14.3532 13.8215 14.2136 14.9374 13.4595 15.6915ZM22.1503 4.67983L24.9518 1.87911C25.2723 1.55868 25.7914 1.55868 26.1119 1.87911C26.4315 2.19877 26.4315 2.71947 26.1119 3.03913L24.9518 4.19916C24.1948 4.95623 23.0652 5.11647 22.1503 4.67983Z"/>
                                <path d="M21.1566 8.79529V14.9711L10.6711 25.4407L10.533 26.5705L21.937 28L23.8364 12.2249L21.1566 8.79529Z"/>
                            </svg>
                            <div class="feature-name">${Object.keys(features)[4]}</div>
                        </div>
                    <div class="feature__name">${features['Цена']}</div>
                </div>
                </div>
                <div class="catalog-item__btn">
                    <a href="${action}" class="view-action action__sign-up action__detailed">${button}</a>
                </div>
                </div>
                
                </div>
                ` ;
                
                } ).join('');
            }

        // nextBtn.addEventListener('click', () => {
        //     this.startCatalogSlider();
        // });
        // prevBtn.addEventListener('click', () => {
        //     this.startCatalogSlider();
        // });
        startCatalogSlider(type) {
                const active = document.querySelector('.slider__item-active');
                const last = document.querySelector('.slider__item-last');
                let next = active.nextElementSibling;
                if (!next) {
                    next = this.containerCatalogCards.firstElementChild;  
                }
                active.classList.remove(['slider__item-active']);
                last.classList.remove(['slider__item-last']);
                next.classList.remove(['slider__item-next']);
            
                active.classList.add('slider__item-last');
                last.classList.add('slider__item-next');
                next.classList.add('slider__item-active');
                    };
        clickBtns() {
            this.nextBtn.addEventListener('click', () => {
                this.createAndRenderCardsOfCatalog();
                this.startCatalogSlider();
            })
            this.prevBtn.addEventListener('click', () => {
                this.createAndRenderCardsOfCatalog();
                this.startCatalogSlider('prev');
            })   
        }     
        launchCatalogSlider() {
                    this.createAndRenderCardsOfCatalog();
                    this.startCatalogSlider();
                    this.clickBtns();
        } 
       

}